#!/bin/bash
set -e

# File Number Modify
# ファイル名の連番を変更する。
# 第1引数として、連番を指定する。
# 第2引数として、ファイル名を指定する。

# 実行例
# fn-mod 12 sample/01_hoge
# fn-mod 12 sample/01_hoge/01_aaa

# 引数の解析
new_number="$1"
old_path="$2"

# 連番が最大数以外の場合は変更する
digit=$(fn-digit "$(dirname "$old_path")")
old_number=$(fn-number "$old_path")
max_number=$((10 ** digit - 1))
new_path=$(dirname "$old_path")/$(printf "%0${digit}d" "$new_number")_$(fn-name "$old_path")
if [ "$old_number" -ne "$max_number" ] && [ "$old_path" != "$new_path" ]; then
  mv "$old_path" "$new_path"
fi
